# MCP (Model Context Protocol) ç¤ºä¾‹é›†åˆ

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„MCPä½¿ç”¨ç¤ºä¾‹é›†åˆï¼Œå±•ç¤ºäº†å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰MCPæœåŠ¡å™¨å¹¶åœ¨LangGraphä¸­ä½¿ç”¨å®ƒä»¬ã€‚

## ğŸ”§ ç¯å¢ƒè®¾ç½®

### 1. å®‰è£…ä¾èµ–
```bash
pip install mcp langchain-mcp-adapters langgraph langchain-openai python-dotenv psutil
```

### 2. è®¾ç½®APIå¯†é’¥
åˆ›å»º `.env` æ–‡ä»¶å¹¶æ·»åŠ ï¼š
```
API_KEY=your_api_key_here
```

## ğŸ“ æ–‡ä»¶è¯´æ˜

### MCPæœåŠ¡å™¨
- `math_tool_mcp_server.py` - æ•°å­¦è®¡ç®—å·¥å…·æœåŠ¡å™¨
- `weather_tool_mcp_server.py` - å¤©æ°”æŸ¥è¯¢æœåŠ¡å™¨ (HTTPä¼ è¾“)
- `host_info_tool_mcp_server.py` - ç³»ç»Ÿä¿¡æ¯æŸ¥è¯¢æœåŠ¡å™¨
- `file_management_mcp_server.py` - æ–‡ä»¶ç®¡ç†å·¥å…·æœåŠ¡å™¨ (æ–°å¢)
- `data_processing_mcp_server.py` - æ•°æ®å¤„ç†å·¥å…·æœåŠ¡å™¨ (æ–°å¢)

### å®¢æˆ·ç«¯ç¤ºä¾‹
- `simple_mcp_demo.py` - ğŸŒŸ å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹ (æ¨èæ–°æ‰‹)
- `complete_mcp_example.py` - å®Œæ•´åŠŸèƒ½æ¼”ç¤º
- `mcp_client.py` - åŸå§‹å®¢æˆ·ç«¯ç¤ºä¾‹
- `start_servers.py` - æœåŠ¡å™¨å¯åŠ¨è„šæœ¬

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1ï¼šç®€å•ç¤ºä¾‹ (æ¨è)
```bash
# ç›´æ¥è¿è¡Œç®€å•ç¤ºä¾‹
python simple_mcp_demo.py
```

### æ–¹æ³•2ï¼šå®Œæ•´æ¼”ç¤º
```bash
# è¿è¡Œå®Œæ•´ç¤ºä¾‹ (åŒ…å«äº¤äº’æ¨¡å¼)
python complete_mcp_example.py
```

### æ–¹æ³•3ï¼šåˆ†åˆ«å¯åŠ¨æœåŠ¡å™¨
```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨å¤©æ°”æœåŠ¡å™¨ (HTTP)
python weather_tool_mcp_server.py

# ç»ˆç«¯2ï¼šå¯åŠ¨å®¢æˆ·ç«¯
python mcp_client.py
```

### æ–¹æ³•4ï¼šåŒæ—¶å¯åŠ¨å¤šä¸ªæœåŠ¡å™¨
```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨æ‰€æœ‰HTTPæœåŠ¡å™¨
python start_servers.py

# ç»ˆç«¯2ï¼šå¯åŠ¨å®¢æˆ·ç«¯
python mcp_client.py
```

## ğŸ› ï¸ MCPæœåŠ¡å™¨è¯¦è§£

### 1. æ•°å­¦å·¥å…·æœåŠ¡å™¨
æä¾›åŸºç¡€æ•°å­¦è®¡ç®—åŠŸèƒ½ï¼š
- å››åˆ™è¿ç®— (add, subtract, multiply, divide)
- é«˜çº§æ•°å­¦ (power, square_root, factorial)
- å‡ ä½•è®¡ç®— (calculate_area)

### 2. æ–‡ä»¶ç®¡ç†æœåŠ¡å™¨ (æ–°å¢)
æä¾›æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼š
- ç›®å½•åˆ—è¡¨ (list_directory)
- æ–‡ä»¶è¯»å– (read_file_content)
- æ–‡ä»¶ä¿¡æ¯ (get_file_info)
- æ–‡ä»¶æœç´¢ (search_files)
- åˆ›å»ºç›®å½• (create_directory)
- å†™å…¥æ–‡ä»¶ (write_file)

### 3. æ•°æ®å¤„ç†æœåŠ¡å™¨ (æ–°å¢)
æä¾›æ•°æ®åˆ†æåŠŸèƒ½ï¼š
- æ•°å­—ç»Ÿè®¡åˆ†æ (analyze_numbers)
- CSVæ•°æ®å¤„ç† (process_csv_data)
- æ•°æ®è¿‡æ»¤æ’åº (filter_data, sort_data)
- ç›¸å…³æ€§åˆ†æ (calculate_correlation)
- æŠ¥å‘Šç”Ÿæˆ (generate_report)

### 4. å¤©æ°”æœåŠ¡å™¨
æ¨¡æ‹Ÿå¤©æ°”æŸ¥è¯¢APIï¼š
- å½“å‰å¤©æ°” (get_current_weather)
- å¤©æ°”é¢„æŠ¥ (get_weather_forecast)
- åŸå¸‚å¯¹æ¯” (compare_weather)

### 5. ç³»ç»Ÿä¿¡æ¯æœåŠ¡å™¨
è·å–ä¸»æœºä¿¡æ¯ï¼š
- ç³»ç»Ÿé…ç½®
- ç¡¬ä»¶ä¿¡æ¯
- å†…å­˜å’ŒCPUä¿¡æ¯

## ğŸ¯ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### æ•°å­¦è®¡ç®—
```
ç”¨æˆ·: "è®¡ç®— (15 + 7) Ã— 3 çš„ç»“æœï¼Œå¹¶æ±‚å¹³æ–¹æ ¹"
AI: ä½¿ç”¨æ•°å­¦å·¥å…·è®¡ç®—å¹¶è¿”å›ç»“æœ
```

### æ–‡ä»¶æ“ä½œ
```
ç”¨æˆ·: "åˆ—å‡ºå½“å‰ç›®å½•çš„æ‰€æœ‰Pythonæ–‡ä»¶"
AI: ä½¿ç”¨æ–‡ä»¶ç®¡ç†å·¥å…·æœç´¢.pyæ–‡ä»¶
```

### æ•°æ®åˆ†æ
```
ç”¨æˆ·: "åˆ†æè¿™äº›æ•°å­—ï¼š[10, 20, 30, 40, 50]"
AI: ä½¿ç”¨æ•°æ®å¤„ç†å·¥å…·è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
```

### ç³»ç»ŸæŸ¥è¯¢
```
ç”¨æˆ·: "æŸ¥çœ‹æˆ‘çš„ç”µè„‘é…ç½®"
AI: ä½¿ç”¨ç³»ç»Ÿä¿¡æ¯å·¥å…·è·å–ç¡¬ä»¶ä¿¡æ¯
```

## ğŸ”§ ä¼ è¾“åè®®è¯´æ˜

- **stdioä¼ è¾“**: é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºä¸MCPæœåŠ¡å™¨é€šä¿¡ï¼Œé€‚åˆæœ¬åœ°å·¥å…·
- **HTTPä¼ è¾“**: é€šè¿‡HTTPæ¥å£ä¸MCPæœåŠ¡å™¨é€šä¿¡ï¼Œé€‚åˆç½‘ç»œæœåŠ¡

## ğŸš¨ æ•…éšœæ’é™¤

1. **æƒé™é”™è¯¯**: ç¡®ä¿æœ‰æ–‡ä»¶è¯»å†™æƒé™
2. **ç«¯å£å ç”¨**: å¤©æ°”æœåŠ¡å™¨é»˜è®¤ä½¿ç”¨8000ç«¯å£
3. **ä¾èµ–ç¼ºå¤±**: æ£€æŸ¥æ˜¯å¦å®‰è£…äº†æ‰€æœ‰å¿…è¦çš„åŒ…
4. **APIå¯†é’¥**: ç¡®ä¿.envæ–‡ä»¶ä¸­è®¾ç½®äº†æ­£ç¡®çš„API_KEY

## ğŸ“š æ‰©å±•æŒ‡å—

è¦åˆ›å»ºè‡ªå·±çš„MCPæœåŠ¡å™¨ï¼š

1. å¯¼å…¥FastMCP
2. ä½¿ç”¨@mcp.tool()è£…é¥°å™¨å®šä¹‰å·¥å…·å‡½æ•°
3. é€‰æ‹©åˆé€‚çš„ä¼ è¾“åè®®
4. åœ¨å®¢æˆ·ç«¯é…ç½®ä¸­æ·»åŠ æ–°æœåŠ¡å™¨

ç¤ºä¾‹ï¼š
```python
from mcp.server.fastmcp import FastMCP

mcp = FastMCP("MyServer")

@mcp.tool()
def my_function(param: str) -> str:
    """æˆ‘çš„è‡ªå®šä¹‰å‡½æ•°"""
    return f"å¤„ç†: {param}"

if __name__ == "__main__":
    mcp.run(transport="stdio")
```

